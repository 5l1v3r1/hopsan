Hopsan Release Notes



--Known issues--

- Some compatibility issues exist between version 0.3.0 and older versions, because some components were discarded. 
  These will not appear when loading the models. Some parameter names was also changed, these parameters will be reset.
- All components are not completely validated



-- Version History --

0.5.0
- Fixed: Small memory leaks (related to removal of system parameters and system ports) in HopsanCore
- Fixed: It is not possible to click the simulate button directly after editing simulation time. You do not need to press enter first.
- Fixed: Simulation will now not start if initialize fails
- Fixed: It is not possible to unload a library and all of its components without restarting Hopsan
- Fixed: SystemVariable values for external models are now save in the system that imports the external file. (You will not loose changes to theses variables)
- Fixed: Build in HopsanCore HMF loader can now handle Subsystems (internal and external) and system parameters correctly.

- Feature: It is now possible to let a SystemVariable take its value from a parent system SystemVariable. This means that you can propagate SystemVariables downwards in the model hierarchy.
- Feature: KeyWords can be reserved in the HopsanCore component factory.
- Feature: Auto update function for Component Appearance XML files.
- Feature: New component appearance XML format version 0.3
- Feature: Reset config-file button. Especially useful in Windows.
- Feature: XY-Plots in Scope (Sink) components
- Feature: Ports can be permanently hidden. Useful for debug-ports in your custom components.
- Feature: Ports can now be given a description in appearance XML file.
- Feature: Components that fail to load are replaced with a dummy component to indicate where missing components should have been.
- Feature: The undo-stack can optionally be saved together with the model in the HMF file.
- Feature: External component libs must now report some basic info about what version of Hopsan they were compiled against, and a name. (See example lib for details).
- Feature: Many auxiliary simulation function have been made inline header only. this might improve simulation speed slightly in some cases. (Reduced overhead)
- Feature: Right click drag copy, instead of holding shift.
- Feature: Changed hydraulic ports in C-type piston component to multiports

- Documentation: New and improved built in documentation style.
- Documentation: More documentation, especially concerning the creation of custom components. (More will come later)
- Documentation: User documentation now contains Doxygen generated documentation from the HopsanCore. (Useful for creation of custom components) 

- Other: Lots of "under the hood" code improvements.


0.4.5
- Fixed: Added missing include files for external dependencies
- Fixed: Simulink export now copies all required include file to export directory

0.4.4
- Fixed: Renamed "Diameter" parameter in valves to "Spool Diameter" to make it clearer
- Fixed: Prevent simulation from running if time step is to low (if it is zero). To avoid getting stuck in simulation loop.
- Fixed: (Workaround) If running with some non English locale settings, numbers in XML would be saved with decimal point , instead of . (Files could not be loaded) 
- Fixed: Signal connector arrows getting stuck in the view when entering a subsystem
- Fixed: Incorrect index increment order in the Delay utility class
- Fixed: Welcome dialog does not have mouse focus on startup

0.4.3
- Fixed: Connector graphics will now be refreshed when subsystem ports have changed type or node, (solves gray connectors between subsystems)
- Fixed: Ports sometimes hidden when they should be visible
- Fixed: Made sure hide/show port and nametext buttons work as they should, refresh when moving between subsystems.
- Fixed: Hide signal components function is now system specific
- Fixed: Hide signal components function now also hide unconnected ports
- Fixed: Allowed both comma and point as decimal delimiter for parameters (comma is changed to point automatically)
- Fixed: List of system parameters in component properties dialog was always based on top level system, even if component was in subsystem
- Fixed: Crash if double clicking sink component after simulation when creating connector from sink component multiport
- Fixed: Missing parmeter (Xpa) in load sensing 4/3 valve component
- Fixed: When undoing deleting a component the parameters were reset
- Fixed: Start value units are not affected by changing units in options dialog (they always use SI units)
- Fixed: Plots exported to Matlab now keep their logarithmic scales in the script file
- Fixed: Flipping an object does not add * to tab (to indicate changes that need to be saved)
- Fixed: Read and write port invert icon in subsystem external ports
- Fixed: Connectors between container ports and subsystems are gray even when connected

- Feature: C-type and Q-type components are now sorted in the correct order if they are connected with signal ports
- Feature: It is now possible to use system parameters from parent system as value for system parameters in subsystem
- Feature: Subsystem ports with signal nodes will change to mirror internal or external port type, (Read or Write icon will make more sense).
- Feature: Program now remembers the paths for all file access functions
- Feature: Rearranged the buttons in the add system parameter dialog so that they make sense
- Feature: Make it possible to copy with ctrl+c in message widget
- Feature: Added help text in pressure source components
- Feature: Added shortcut descriptions for actions in component right-click menus

0.4.2
- Fixed: Graphics for external component libraries will not be shown if library failed to load
- Fixed: Crash when double clicking sink that has not been connected
- Fixed: Flip button now works on containerobjects (subsystems)
- Fixed: Correct error message when trying to connect readports to multiports
- Fixed: No longer registers startvalues for subports in multiports
- Fixed: No longer reregister startvaules while initializing (disabled values would reapear)
- Fixed: ; At end of vectors in matlab .m script plot data export
- Fixed: Exporting both amplitude and phase curve to .m file
- Fixed: Added scrollbar to subsystem properties, (usefull if you have many systemparameters)
- Fixed: Removed initial "../" from #include paths to avoid build issues with external libraries using Component Utilites
- Fixed: Removed anoying popup window telling the user about .xml files not containing appearance data, (in case user has other .xml files)
- Fixed: Highlighted drop area in plot window does not correspond exactly with the actual drop areas
- Fixed: Changing standard units will update plot unit in ports

- Feature: Load and save function remembers last used directory (while the program is running)
- Feature: Added an initial simple ExternalComponent example library, (with plenty of comments in the code)

- New Components: sin, cos, tan (Trigonometric functions)

0.4.1
- Fixed: Options dialog now resets its values next time after pressing cancel
- Fixed: Made default start values for components work again
- Fixed: Made some important corrections to equations in Q-type cylinder
- Fixed: External libraries with no components are no longer loaded (they turned out "invisible" and could not be unloaded)
- Fixed: Crash when loading two external libraries with same name
- Fixed: "Similar messages" counter did not reset between different message types
- Fixed: Undo stack is now enabled by default (may require re-saving old models)
- Fixed: Backwards compatibility for loading older .hmf files, where parameters could only be real numbers
- Fixed: Crash when loading connection from model files where components or ports are missing or have had their names manually altered
- Fixed: Restored possibility to load old style startvalue settings from hmf files (will still be saved in new format)
- Fixed: Rare occurance of endless loop when loading and setting rotation angle for model objects from hmf files
- Fixed: Made sure error message reporting and debug messages for external component lib loading works. Now you will actually get a message if external lib fails to load.
- Fixed: Wrong parameter units in some components

- Feature: Added initial capability to get compile info from external libs when loading, (optional implementation for now, will be mandatory in the future)

0.4.0
- Added tools for transfer function analysis (Bode plots, Nyquist plots and FFT)
- Added support for exporting models to Simulink
- A backup of the model file is now always created before saving
- Made it possible to drag-n-drop copy a component by holding shift key and draging
- Made it possible to drag components only vertically or horizontally with ctrl key
- Made the sink component work like a scope; it plots all connected ports when double-clicking
- Added an alternative view mode for the library
- Made it possible to unload external libraries without restarting program
- Line width in component graphics was reduced slightly
- Arithmetic components are now shown in blue
- Improved descriptions and help pictures for filter and transfer function components
- Independent arithmetic components parallelized in multi-threaded simulation
- Subsystems can now have individual time steps (always an even multiple of parent systems time step)
- Decreased saving/loading/closing time significantly for large models
- Added help popup messages
- Made it possible to hide all arithmetic components in a model
- It is now possible to copy/paste system ports
- Toolbars can now be placed on right or left side of the workspace
- Empty plot windows are now closed automatically when discarding their last plot curve
- Combined text and box widget into a text box widget
- Program settings are now saved to configuration file every time a setting has changed
- Made it possible to scale SVG object icons
- External subsystems can no longer be edited directly, they need to be opened in a new tab
- Configuration file now remembers the "group by tag" setting in message widget
- Adjusted size of welcome dialog, to see more of the recent news
- Fixed crash when loading models with non-existing components
- Fixed crash when simulating from Python console with progress bar activated
- Fixed numerical issues with initialization of second order transfer function
- Corrected wrong parameter order in filter components
- Fixed crash when deleting connected system ports
- Fixed errenous width of connector lines
- Made integrator component use output start value for initialization
- Made models load at correct viewport position when loading last session models
- When saving models for the first time, they are now added to recent models list
- Added a warning message before truncating errenous parameter values
- Made subsystem clear the old contents before loading from external file
- Made subsystems remember their icon when saving/loading
- Made it impossible to simulate when a component uses a non-existing system parameter
- Made several fixes to port graphic issues
- Made start values show correct units in parameter dialog
- Made welcome dialog remain if user clicks cancel in "open" dialog
- New components: Input/output interfaces for Simulink connection
- New component: 2/2 Poppet Valve
- New component: Gaussian Noise Generator
- New component: Additive Gaussian Noise
- New component: General First Order Transfer Function
- New component: Rotating Inertia With Coulumb Friction
- New component: Route With Two Inputs
- New component: Route With Three Inputs
- New component: Route With Four Inputs
- Removed component: Route

0.3.5
- Fixed crash when copy/paste subsystem connected to internal container port
- Fixed crash when plotting from inside subsystems
- Fixed crash when readports on some signal components with multiports were not connected
- Fixed crash when deleting internal systemport that was externally connected
- Fixed issue with special X-axes in plots not being updated to new generations

0.3.4
- Fixed important error in calculation of position in mass components
- Fixed order of parameters in filter utilities and components
- Fixed containerport graphics remaining blank on internal or external connections
- Added all greek letters as special symbols for parameter names
- Changed model folder to Documents/Hopsan/Models
- New component: General first order transfer function


0.3.3
- Corrected errenous filter algorithms for several mechanic components
- Fixed crash when closing the last project tab when a plot window is open
- Recent models are now sorted in correct chronlogical order
- Fixed issues with warning message for disabling undo appearing in wrong situations
- Fixed crash when performing copy/paste operations on subsystems that has been opened
- Renaming component now also updates the component name in the lists in the plot window
- Fixed issue with wrong plot tab being closed when clicking close button
- Fixed cosmetical problems due to saving/loading models
- Fixed crash when simulating if a connector has been removed but a plot window with it is still open
- Made it possible to undo/redo adding/deleting subsystems
- Fixed crashes with custom components attempting to access non-connected ports
- Fixed issue with signal connectors not getting arrows when connected to system ports
- Fixed correct color on connectors between systems or systems and multiports

0.3.2
- Improved welcome screen with latest news and check for new versions
- Library now gives a debug message when a component is loaded
- The component properties window for components now shows the component's type name
- Port label background is now a little wider
- A warning message is now given when CQS type of a system is invalidated
- Fixed crash when trying to plot generations of a component from before it was added
- Corrected wrong error message when looping subsystems
- Fixed bug that made ports invisible after aborting connection with escape key
- Fixed crash when trying to plot after loading model by double-clicking on its file
- Made subsystem ports appear at the same order as their placement position inside the system
- Fixed crash when attempting to loop two system signal ports that internally are connected to each other
- Connector graphics is not updated when subsystem ports switch places
- Made it possible to undo creating/removing container ports
- Fixed crash when removing the contents of a looped signal subsystem and later trying to remove the remaning external connector
- Fixed crash when internally removing systemport that is externally connected

0.3.1
- Plot window now resizes automatically to 70% of screen size
- Lists and curve info boxes in plot window are hided by default on small screen resolutions
- Exported PNGs from plot window now always get the same pixel size as the plot in the program
- Cosmetic improvements to container port properties dialog
- Container port properties dialog can now be opened by double-clicking a container port
- Fixed minor cosmetic bug in plot window (list names were not hidden when the lists were)
- Corrected the cavitation checks in pumps and motors, so that oil can never flow from a volume with zero pressure
- Added oil density as a parameter in all components that depends on it (used to be hard coded)
- Fixed wrong parameter name in 4/3 servo valve
- New component: Hydraulic Hose
- New component: Pilot Controlled Check Valve
- New component: Pilot Closable Check Valve
- New component: Check Valve With Orifice
- New component: 4/3 Servo Valve With Neutral Position Open To Tank
- New component: 4/3 Servo Valve With Supply Open To Tank At Neutral Position

0.3.0
- Subsystems are now fully implemented
- Added "multi ports" so that multiple connections can be connected to the same port
- Made volume, pressure source and some signal components use multi ports
- Completely new plot window
- Plot curves from different generations can be plotted against each other
- Plot curves can be scaled and moved
- Plots can be exported to Comma-Separated Values format (.csv)
- Plots can be exported to Matlab script file format (.m)
- Plot window configurations can be saved to .xml format
- Added the possibility to give plot variables an alias, which makes it easier to access from python scripts
- Several curve markers can now be added to the same curve
- Added a recent model list on welcome dialog
- Added option to attach a script file to a model file, that will be executed automatically when loading the model
- Made it possible to make connector lines dashed, for e.g. pilot lines
- Revised program style sheet
- Fixed crash when trying to connect same two ports with two connecteors
- Fixed several bugs in component model code
- Remade C-type Cylinder component
- New component: Pressure Compensating Valve
- New component: Lever With Mass
- New component: Rotational Gear With Inertia
- New component: Rotational Single Gear With Inertia
- New component: Max
- New component: Min
- New component: Sum
- New component: Route

0.2.2
- Fixed critical bug that caused a crash when deleting a c-type pressure source
- Fixed bug that made plot window crash if using auto update with angular velocity
- Added a "Check For New Versions" option under Help menu, that will open the download page directly
- Changed windows installer platform from InstallJammer to Inno Setup
- Modified transmission example model so it is an angular velocity servo instead of an angle servo
- Changed graphic icons for sensor components
- New component: Mechanic angular velocity sensor
- New component: Mechanic torque sensor

0.2.1
- Fixed issue with component properties dialog being too large for laptop screens
- Fixed bug with ports being flagged as not connected after cancelling creation of a second connector
- Fixed crash when trying to add system parameter without name
- Fixed missing icon for .hmf files
- Limited number of simulation threads to the number of system cores to avoid locking up the system
- The "Edit text box" field is now resizable
- The "View" menu is now alphabetically sorted
- Added rotate and flip operations to the right-click menu of the components
- Included time stamps in message widget, and made it more readable
- Added a reset default value button in component properties dialog
- Made default values gray in component properties dialog
- Corrected some component names
- New component: Q-type tank

0.2.0
- First beta release
