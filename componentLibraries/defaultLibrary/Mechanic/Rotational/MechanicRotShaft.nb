(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 8.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       157,          7]
NotebookDataLength[     15696,        329]
NotebookOptionsPosition[     14951,        302]
NotebookOutlinePosition[     15295,        317]
CellTagsIndexPosition[     15252,        314]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Shaft", "Section",
 CellChangeTimes->{{3.52260439790625*^9, 3.522604398390625*^9}}],

Cell["\<\
Shaft with torsional spring implemented using bilateral delay lines.\
\>", "Text"],

Cell[GraphicsData["Metafile", "\<\
CF5dJ6E]HGAYHf4PEfU^I6mgLb15CDHPAVmbKF5d0@00015X0@0006`0002Coooo=`H00>@G00362P00
?P4005dM001;HP00^bX00215CDH00040J14009P0000300000000000000000000XQ800:PJ003:0000
8@400000000000000000010E0`3XJ0@0AP0002`0000P0000ADe6:`500@0L00004000008@`=/00000
F08005P200160000G00005000015CDH[8T0400`0000000007T0900`000000000940100`000000000
<4020100000400000020?b501`0<0000000000A0000<0000000004H0000X0000700004M4BD<20000
B`000>l6000^5`003`X0000000160000:00001`00017A4U30P0007D0003B20000AL0080900000000
AP0005P0001<0000ADe6:bY0000T000060000000P3l000200000P000P3l000200000P0Y0080T0000
60000;:b/_l10000Zj[a@UEG3DFY9;A5/:XV@b4000080000HP0000`000010000900002@00000080n
000000000000080n00000000000200009`0001P00001000000000;:b/P0000009@0000`000010000
9@0000`000080020EP000300001h0000e@P00?dF001l2@001@000>81E2?R0NlUm5__9OAKE2?R0E@S
9@0000`0000700209@0000`000000020900002@00000081000000000000008100000000000020000
AP0009`0002@0000ADe6:`Q000900000=000008@`=/00000eP00000000000<Q00P00008000000011
0P00000000024<3K00000;:b/_l8@043?000030000024<3K10000000002[Z_52EEL=AJ^ZlD80`QM5
EN^gA@325dEEjkM5EEL=A@010H4E@040400000@000000000>P0000`000080000900002@00000080n
000000000000080n0000000000020000G`0003P000020000>0000000000h00000000000P0@0I0000
00000;:b/P00000000000000000U000030000080000U0000300000D0081F0000;00005L0002d2000
7QL009d900040000hP5D8n81kbGdFnlUm5]D8bD0000<00001`00P2D0000<00000000P2@0000T0000
0020@000000000000020@000000000000P0002P0000<00000P0003X0000<00002P000280000<0000
ooooodH0000L0000400004E=AR/4@0003000000000160000500000P00017A4U30`0004H0000X0000
700004M4BD<20000HP0006P7000@5`00^@L0000000160000F00004`00015CDH[:T0002@0000H0000
0020?`00080000200020?`00080000202T00P2@0000H0000/[:bo`40002[:/a2083]A5@_]DE@eI52
8@0000P0001R000030000040000T000090000000P3h0000000000000P3h0000000000080000U0000
30000040000U0000300000P0081F0000<00006D0001[1`0031L00;D700050000U`6^7IL1dQh^G=8N
;Ub^7IL1[QdU0000300000L0080U000030000000080T000090000000P400000000000000P4000000
0000008000160000W00009000015CDH[24020T00000d00000Q30f`00003F000000000000b4020000
0P000000044200000000008@`=/00000/[:bo`Q00`<l0000<000008@`=/4000000000:/Zc480P>e4
Zb[<@UFMmT@0H;Q5EIgfA01P^4D0P>e40041PAE00`0@000010000080000j0000300000P0000T0000
90000000P3h0000000000000P3h0000000000080001O0000>0000080000h0000000003P000000000
020101T000000000/[:b000000000000000002D0000<00000P0002D0000<00001@00P5H0000/0000
A00004X7000]5`00ePL000@0002G0JhMU`7B7RiLdQh^G:hM9@0000`0000700209@0000`000000020
900002@00000081000000000000008100000000000020000:00000`000020000>P0000`0000:0000
8P0000`0003oooooAP0001`0000@0000ADe6:`A0000<0000000004H0000D0000200004M4BD<30000
AP0002P0000L0000AdA9@`80001;0000k`H002hG000?2P00000004H000300000]00004E=AR/Z@000
900001P00000080o0000P0000800080o0000P0000808@0@2@00003@000024<3K00000=H000000000
0018@P80000200000000@@80000000000Q30f`000000003o24050c`0000`00000Q30f`@000000000
0038@P00hD@00<Q2060OAJ^R^4D0H1m5Zj:hA@00hD@00@615D050100000400001000024000080000
HP0000`000010000>P0000`000080000900002@00000080n000000000000080n0000000000020000
G`0003P000020000>0000000000h00000000000P0@380000000000000000000000000000000U0000
30000080000U0000300000D0081F0000;00009?ooolg1P00i1L00<H:00040000SP4N78h1eRM@G=HW
D5`N72D0000<00001`00P2D0000<00000000P2@0000T00000020@000000000000020@00000000000
0P0002P0000<00000P0003X0000<00002P000280000<0000ooooodH0000L0000400004E=AR/4@000
3000000000160000500000P00017A4U30`0004H0000X0000700004M4BD<20000M@000=8800015`00
P0T0000000160000F00004`00015CDH[:T0002@0000H00000020?`00080000200020?`0008000020
2T00P2@0000H0000/[:bo`40002[Z_52EEL=AJTT]4F`ZRI38@0000P0001R000030000040000T0000
90000000P3h0000000000000P3h0000000000080000U000030000040000U0000300000P0081F0000
<00007P0003E2000oAH007`900050000hP5D8n81kbGdFnlUm5]D8n81E2<U0000300000L0080U0000
30000000080T000090000000P400000000000000P40000000000008000160000800001@00015CDH[
5D01010000040000000003X0000<0000200002@0000T00000020?P00000000000020?P0000000000
0P0005l0000h00000P0003P000000000>0000000000080406@000000002b/[800000000000000000
9@0000`0000200009@0000`000050020EP0002`0001G0000]0P001hG002M2@0010000>81E2?R0NlU
m5__9OAKE2<U0000300000L0080U000030000000080T000090000000P400000000000000P4000000
00000080000X000030000080000j0000300000X0000R000030000?oooom60000700001000015CDH[
140000`000000000AP0001@000080000AdA9@`<000160000:00001`00017A4U30P000680001X1`00
41L00;T700000000AP0005P0001<0000ADe6:bY0000T000060000000P3l000200000P000P3l00020
0000P0Y0080T000060000;:b/_l10000Zb[<@P20kDAD;kE5D=FA@R4000080000HP0000`000010000
900002@00000080n000000000000080n00000000000200009@0000`0000100009@0000`000080020
EP000300001U0000J`L000`G002e1`001@0009L1[QfG0M8N;UcB7RiL[QfG0JhM9@0000`000070020
9@0000`000000020900002@00000081000000000000008100000000000020000AP000200000D0000
ADe6:aE00`0@000010000080000j0000300000P0000T000090000000P3h0000000000000P3h00000
00000080001O0000>0000080000h0000000003P000000000020101T000000000/[:b000000000000
000002D0000<00000P0002D0000<00001@00P5H0000/0000A00004X7000]5`00ePL000@0002G0JhM
U`7B7RiLdQh^G:hM9@0000`0000700209@0000`000000020900002@0000008100000000000000810
0000000000020000:00000`000020000>P0000`0000:00008P0000`0003oooooAP0001`0000@0000
ADe6:`A0000<0000000004H0000D0000200004M4BD<30000AP0002P0000L0000AdA9@`80001;0000
k`H002hG000?2P00000004H000140000>00004E=AR/Z@000900001P00000080o0000P0000800080o
0000P000080E@0D0400000@0000400008@0000P0001R000030000040000j0000300000P0000T0000
90000000P3h0000000000000P3h0000000000080001O0000>0000080000h0000000003P000000000
02010<P0000000000000000000000000000002D0000<00000P0002D0000<00001@00P5H0000/0000
ToooocL6003T5`00aPX000@0002>0AhLSP7F9e1LeRM@G1hL9@0000`0000700209@0000`000000020
900002@00000081000000000000008100000000000020000:00000`000020000>P0000`0000:0000
8P0000`0003oooooAP0001`0000@0000ADe6:`A0000<0000000004H0000D0000200004M4BD<30000
AP0003@0000X0000ADe6:bY0000T000060000000P3l000200000P000P3l000200000P24000080000
HP0000`000010000C00006@0002Loooo@0H00=/G002m2P00W?oood0600106000OP@002T0ZP000000
00000000P3l0000000000000P3l000000000000000000000000000000000000000000280000<0000
ooooodH0000L0000400004E=AR/2@00030000000000>000050000000000@00005000
\>"], "Text",
 ImageSize->{209.313, 28.75},
 ImageMargins->{{22, 0}, {0, 0}},
 ImageRegion->{{0, 1}, {0, 1}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"domain", "=", "\"\<Mechanic\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{"displayName", "=", "\"\<RotShaft\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{"brief", "=", "\"\<Rotational shaft with torsional spring\>\""}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{"componentType", "=", "\"\<ComponentC\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{"author", "=", "\"\<Petter Krus <petter.krus@liu.se>\>\""}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "affiliation", " ", "=", " ", 
   "\"\<Division of Fluid and Mechatronic Systems, Link\[ODoubleDot]ping \
University\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetFilenames", "[", 
   RowBox[{"path", ",", "domain", ",", "displayName"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ResetComponentVariables", "[", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"Date", "[", "]"}]}], "Input",
 CellChangeTimes->{{3.5137112151875*^9, 3.513711217109375*^9}, {
   3.51378596903125*^9, 3.513785980671875*^9}, 3.515394539753217*^9, {
   3.515775693875*^9, 3.5157757050625*^9}, {3.517048046727305*^9, 
   3.51704806093043*^9}, 3.51707206725*^9, {3.5176530686834764`*^9, 
   3.51765311057437*^9}, {3.517673126703125*^9, 3.517673126796875*^9}, {
   3.5177214423487377`*^9, 3.517721453114225*^9}, {3.5177222281793466`*^9, 
   3.517722236008023*^9}, {3.5192815953125*^9, 3.5192816093125*^9}, {
   3.5209603410625*^9, 3.52096034128125*^9}, {3.54985636715625*^9, 
   3.5498563754375*^9}, 3.5758034074886527`*^9, {3.6065788085193233`*^9, 
   3.606578811761509*^9}, 3.612446592273651*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"inputParameters", "=", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "Ks", ",", "1000.", ",", "double", ",", "\"\<Nm/rad\>\"", ",", 
       "\"\<Spring constant\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "alpha", ",", "0.9", ",", "double", ",", "\"\<\>\"", ",", 
       "\"\<damping factor\>\""}], "}"}]}], "\[IndentingNewLine]", "}"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.519318796546875*^9, 3.519318804953125*^9}, {
   3.54978019078125*^9, 3.549780199734375*^9}, 3.54985607496875*^9, {
   3.549856275109375*^9, 3.549856289484375*^9}, {3.571932894868863*^9, 
   3.571932896694066*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"fak", "=", 
   FractionBox["1", 
    RowBox[{"1", "-", "alpha"}]]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Zexpr", "=", 
   RowBox[{"Ks", " ", "fak", " ", "mTimestep"}]}], ";"}]}], "Input",
 CellChangeTimes->{3.519317664515625*^9, 3.549780434484375*^9, 
  3.549856941265625*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"initialExpressions", "=", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Zthetarot1", "==", "Zexpr"}], ",", "\[IndentingNewLine]", 
     RowBox[{"Zthetarot2", "==", "Zexpr"}], ",", "\[IndentingNewLine]", 
     RowBox[{"crot1", "==", "mrot1"}], ",", "\[IndentingNewLine]", 
     RowBox[{"crot2", "==", "mrot2"}]}], "\[IndentingNewLine]", "}"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.519281698359375*^9, 3.5192817149375*^9}, {
  3.5719328762892303`*^9, 3.571932891156057*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"constantParameters", "=", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{"{", 
     RowBox[{
     "alpha", ",", "0.3", ",", "double", ",", "\"\<\>\"", ",", 
      "\"\<numerical damping\>\""}], "}"}], "\[IndentingNewLine]", "}"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{
  3.549780219859375*^9, {3.5719329023256764`*^9, 3.571932903339678*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"nodeConnections", "=", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"MechanicRotCnode", "[", 
      RowBox[{"mr1", ",", "0.", ",", "0.", ",", "\"\<mechanical node 1\>\""}],
       "]"}], ",", "\[IndentingNewLine]", 
     RowBox[{"MechanicRotCnode", "[", 
      RowBox[{"mr2", ",", "0.", ",", "0.", ",", "\"\<mechanical node 2\>\""}],
       "]"}]}], "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.519281679328125*^9, 3.519281686671875*^9}, {
  3.51931795584375*^9, 3.519318001453125*^9}, {3.519318130546875*^9, 
  3.519318136109375*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"initialExpressions", "=", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"cmr1", "==", 
      RowBox[{"tormr1", "-", 
       RowBox[{"Zexpr", " ", "wmr1"}]}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"cmr2", "==", 
      RowBox[{"tormr2", "-", 
       RowBox[{"Zexpr", " ", "wmr2"}]}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"cmr1f", "==", "tormr1"}], ",", "\[IndentingNewLine]", 
     RowBox[{"cmr2f", "==", "tormr2"}]}], "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.51681842278125*^9, 3.516818476890625*^9}, 
   3.516818573890625*^9, {3.519289792671875*^9, 3.51928981996875*^9}, {
   3.5193177115625*^9, 3.51931777315625*^9}, {3.5719329086748877`*^9, 
   3.5719329248989162`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"localExpressions", "=", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"cmr10", "==", 
      RowBox[{"cmr2", "+", 
       RowBox[{"2", " ", "Zexpr", " ", "wmr2"}]}]}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"cmr20", "==", 
      RowBox[{"cmr1", "+", 
       RowBox[{"2", " ", "Zexpr", " ", "wmr1"}]}]}]}], "\[IndentingNewLine]", 
    "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.47858332371875*^9, 3.478583443984375*^9}, {
   3.478596512125*^9, 3.478596630296875*^9}, {3.47859673825*^9, 
   3.4785967756875*^9}, {3.478596964234375*^9, 3.478596992640625*^9}, 
   3.478597029796875*^9, {3.478600289875*^9, 3.47860030565625*^9}, {
   3.51582105284556*^9, 3.51582105678306*^9}, {3.5159004728175173`*^9, 
   3.515900475551874*^9}, {3.5159009659499717`*^9, 3.515900975043605*^9}, {
   3.5159024812862654`*^9, 3.5159025043018904`*^9}, {3.5167064051243*^9, 
   3.516706412796175*^9}, {3.516818175265625*^9, 3.51681819540625*^9}, {
   3.516818378453125*^9, 3.516818390015625*^9}, {3.5192897721875*^9, 
   3.51928977840625*^9}, {3.519317548234375*^9, 3.51931754925*^9}, {
   3.51931775690625*^9, 3.51931776296875*^9}, {3.571932929937725*^9, 
   3.5719329376597385`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"expressions", "=", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"cmr1", "==", "cmr1f"}], ",", "\[IndentingNewLine]", 
     RowBox[{"cmr2", "==", "cmr2f"}], ",", "\[IndentingNewLine]", 
     RowBox[{"cmr1f", "==", 
      RowBox[{
       RowBox[{"alpha", " ", "cmr1f"}], " ", "+", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"1", "-", "alpha"}], ")"}], " ", "cmr10"}]}]}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"cmr2f", "==", 
      RowBox[{
       RowBox[{"alpha", " ", "cmr2f"}], " ", "+", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"1", "-", "alpha"}], ")"}], " ", "cmr20"}]}]}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"Zcmr1", "==", "Zexpr"}], ",", "\[IndentingNewLine]", 
     RowBox[{"Zcmr2", "==", "Zexpr"}]}], "\[IndentingNewLine]", "}"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.47858332371875*^9, 3.478583443984375*^9}, {
   3.478596512125*^9, 3.478596630296875*^9}, {3.47859673825*^9, 
   3.4785967756875*^9}, {3.478596964234375*^9, 3.478596992640625*^9}, 
   3.478597029796875*^9, {3.478600289875*^9, 3.47860030565625*^9}, {
   3.51582105284556*^9, 3.51582105678306*^9}, {3.5159004728175173`*^9, 
   3.515900475551874*^9}, {3.5159009659499717`*^9, 3.515900975043605*^9}, {
   3.5159024812862654`*^9, 3.5159025043018904`*^9}, {3.5167064051243*^9, 
   3.516706412796175*^9}, {3.516818200453125*^9, 3.5168182011875*^9}, {
   3.516818238359375*^9, 3.5168182486875*^9}, {3.51681829715625*^9, 
   3.516818360484375*^9}, 3.516818397609375*^9, {3.519289677296875*^9, 
   3.519289711046875*^9}, {3.5193175181875*^9, 3.5193175199375*^9}, {
   3.519317920234375*^9, 3.519317921890625*^9}, {3.571932940186943*^9, 
   3.57193295539697*^9}}],

Cell[BoxData[
 RowBox[{"Compgen", "[", "file", "]"}]], "Input"]
}, Open  ]]
},
WindowSize->{707, 505},
WindowMargins->{{Automatic, -66}, {17, Automatic}},
FrontEndVersion->"8.0 for Microsoft Windows (64-bit) (October 6, 2011)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[579, 22, 89, 1, 71, "Section"],
Cell[671, 25, 92, 2, 29, "Text"],
Cell[766, 29, 6207, 79, 43, "Text"],
Cell[6976, 110, 1589, 34, 192, "Input"],
Cell[8568, 146, 718, 17, 92, "Input"],
Cell[9289, 165, 328, 9, 70, "Input"],
Cell[9620, 176, 536, 11, 132, "Input"],
Cell[10159, 189, 386, 10, 72, "Input"],
Cell[10548, 201, 595, 13, 72, "Input"],
Cell[11146, 216, 748, 16, 112, "Input"],
Cell[11897, 234, 1227, 24, 92, "Input"],
Cell[13127, 260, 1742, 36, 172, "Input"],
Cell[14872, 298, 63, 1, 31, "Input"]
}, Open  ]]
}
]
*)

(* End of internal cache information *)
