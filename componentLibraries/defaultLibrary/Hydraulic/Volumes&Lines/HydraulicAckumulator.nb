(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 8.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       157,          7]
NotebookDataLength[     25504,        624]
NotebookOptionsPosition[     23232,        552]
NotebookOutlinePosition[     23789,        573]
CellTagsIndexPosition[     23746,        570]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell[TextData[StyleBox["Ackumulator",
 FontFamily->"System"]], "Section",
 Evaluatable->False,
 CellChangeTimes->{{3.52488616965088*^9, 3.5248861799318666`*^9}, {
   3.549457210515625*^9, 3.54945721375*^9}, {3.54964439396875*^9, 
   3.54964439896875*^9}, 3.576214739734736*^9}],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"domain", "=", "\"\<Hydraulic\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{"displayName", "=", "\"\<Ackumulator\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{"brief", "=", "\"\<This is piston with an inertia load\>\""}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{"componentType", "=", "\"\<ComponentQ\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{"author", "=", "\"\<Petter Krus <petter.krus@liu.se>\>\""}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "affiliation", " ", "=", " ", 
   "\"\<Division of Fluid and Mechatronic Systems, Link\[ODoubleDot]ping \
University\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetFilenames", "[", 
   RowBox[{"path", ",", "domain", ",", "displayName"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ResetComponentVariables", "[", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"Date", "[", "]"}]}], "Input",
 CellChangeTimes->{{3.5137112151875*^9, 3.513711217109375*^9}, {
   3.51378596903125*^9, 3.513785980671875*^9}, 3.515394539753217*^9, {
   3.515775693875*^9, 3.5157757050625*^9}, {3.517048046727305*^9, 
   3.51704806093043*^9}, 3.51707206725*^9, {3.5176530686834764`*^9, 
   3.51765311057437*^9}, {3.517673126703125*^9, 3.517673126796875*^9}, {
   3.5177214423487377`*^9, 3.517721453114225*^9}, {3.5177222281793466`*^9, 
   3.517722236008023*^9}, {3.5209603293125*^9, 3.520960329578125*^9}, 
   3.521782180515625*^9, {3.52178222675*^9, 3.521782271609375*^9}, {
   3.521782314984375*^9, 3.52178231528125*^9}, 3.5248861854161005`*^9, {
   3.549457222296875*^9, 3.54945722546875*^9}, 3.575772120031607*^9, 
   3.576214746669736*^9, {3.576216089867127*^9, 3.5762161017623167`*^9}, 
   3.576216150378739*^9, {3.6058491003507786`*^9, 3.605849105558299*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "2014", ",", "9", ",", "17", ",", "9", ",", "17", ",", 
   "59.7825548`9.52914929885591"}], "}"}]], "Output",
 CellChangeTimes->{3.6058501946730304`*^9, 3.6199268457661552`*^9, 
  3.61992699393097*^9, 3.6199270798005567`*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Component description", "Subsection"],

Cell[CellGroupData[{

Cell["\<\
A general ackumulator. This model does not have any thermodynamic losses. The \
process is considered to be adiabatic.\
\>", "Text",
 CellGroupingRules->{GroupTogetherGrouping, 10000.},
 CellChangeTimes->{{3.6058462493056927`*^9, 3.6058462786656284`*^9}, 
   3.6058500540234365`*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"Bp", "=."}], ";", 
  RowBox[{"Ap", "=."}], ";", 
  RowBox[{"p0", "=."}], ";"}]], "Input",
 CellGroupingRules->{GroupTogetherGrouping, 10000.},
 CellChangeTimes->{{3.54953147675*^9, 3.549531484296875*^9}, {
   3.6058465047642365`*^9, 3.605846513109071*^9}, 3.6058500540234365`*^9}]
}, Closed]],

Cell[CellGroupData[{

Cell[BoxData[
 GraphicsBox[
  TagBox[RasterBox[CompressedData["
1:eJztnT9ILEccxwcMRwTBgIjRxhcQDViYQjCF6AsoCPHlSRDfAwXlKWghnIqF
jRhQsLRIYWlpaWlpmmCRwlIIgSOksAmYQEIsQjb7Ofanc+vq/fF2Z+/294FB
7rzbm/nOzG9+Mzv7m88+5L/90GKMOfHTV376yCRDPp9/tbi4+Hp6+uu1sbGx
70h9fX3nvb29F5JGR0cPeX92dvY9n11fX/88oezFxsrKypeUq6Oj49p/6dWS
+O7IyMiRf60vXJShFqi/wcHB01wud2ueKVtXV5c3Pj5eknjvue+0trbeDA8P
H/MbDopWFvJFezahfPtaeDMzM97x8bF3eXnpVcLNzY13cXHhnZyceO/fvSte
I3zdnp6ey7RoQRvt7+8/M6E6Xltb887Pzysqcznu7u68s7Mzb2lpyWtvby/R
gt92ZTf29vY+HhoaOrHzQ/4ODw+LeY4Lrn10dPRIC/qIb3c/Sar82PjOzs4r
Y7V3XxPv9vY2trKH4bd2dnZK+omvSyEJ2zk3Nzdj2zvaJ/3XFfw2eZD8tLS0
/MPYGlf5GbuNVffYubRwenpa0iYYk+tdfvqbsWxepTY+Sa6urjx/bCqxl9it
epR/YmJiR67r+ytO2345sBP4GsaylS8tf9C3itfzx4FYbX49wSeRfE9OTm7U
Wn58EGwM16GNpbn+w1BX1JnosLCwMFVt+fE7xP4zFl9fX7suVtUUCoV7/5uy
VOtLie+HrcVvbVSw3TJeBD5NRQTtpvg9fLJGh3mHlOft22+WKtFAfEBsQKPY
wHKIbWDuWW68DGxo8fPMU5oF+oSpYJxgzoFOJvADmg0ZLxnrtre3P43SwPaF
8LmaDcpkHny9oygNWJfg/1NTU66zGxsyv2KOGdEPXolG2NFmBRsn5WS9M6of
MJYmuQ6QNIxz4i8E8+BM9QOBMppgzTpr/UCwfaag7CZYny2+10jzolqhjNIf
xG8M/hbfywqy1hLYwfs1Mt7PCviAtp8g62Ssv2QF8Rm5J4YG3Ps0wRpxVhBf
Kbg3dj9PZL0+K3A/xPYX29rafuX1wcHBz4VC4YcspN3d3V8Cn/APNPD//s56
2f7+vuvqSQx/LJQ55F3gJmXGPxKkL/h94DfVQDVQDVQD1UA1UA1UA3ClAfc5
uHdZTYoLFxrY67nVpLjud7rQQNYsqk3cO48DFxpQn3bdPtf+7c9ubGzEkh8X
GrCuL/shWMN5DlnjYd0zrjVeVzbRrt+n9vHa9wTjagPgSgO7LbAfIIok2gC4
9A/YSym/F97fYLcB9j3HiWsfSfaEhNuCtAHaStz7X1xrYPsK0hawD3H7BDau
NQBpC1Ln4ddxkwYN7LYg94GTagOQBg3A3keaZBuAtGiAT2hrkOTvp0UDkLHg
KX8hLp7SgPsO/C8LKZ/PR2qQpbS4uBipwcDAwKPnLps1ra6upsYeuCJNNtEV
qoFqAKqBagCqgWoAqoFqAKqBagCqgWoAqoFqAKqBagCqgWoAqoFqAE9psLW1
5TpriTE/P18scy6X+9vWYHl52XXWEmNzc1Put/xna8C9tqwgfcFP/9oajI6O
us5aYsjzjeFnurjXlhWs2Cgl9iCufbFpROLK+TbxL1sDXxPXWUsMee7d1+BP
BHjzZvpQdGjmOCACZZR4rBOTE9+jgR0Hgz2UzY69T9SOvyrxUIhn3OxQRsoa
jg9kx8VplhhpUVA26QfhOFFZ6Q/2XrioON1Z6A/E/w7a++1eRPw8uz80YtzM
ctjxcIIY4Y8glpzETy33rEkjIm2AMkpcpCjs2Hn1ihmfBiqJmSfQRySGYtJ7
R+NE5geU7anYiTbEVBfN0hRPvFbsPfLVxFqWMYKxtJHjSRJfWPwBfKKoseAp
8CHt+NJcq9FgXsB6gAnsYDheYiXYfaKR4owLdrxxzgOqtvyCHWe3kWIrEu/K
VDgOVEJwjeL10DbN82vaqvgBxjzEAqsH9rkz9LE0+pHhcweIgVbPM1qwp/Y5
FNjaNMWgjjp/Iq4zarAtMl6QWKN2bSt5Fs4+hyQcKzYOGGPElzTBWqyL+3S0
Q7vu4z6PJgz+pvhR5sH+JLL2wBpA+LlA+r6rM93wIeyzmkzgS9A+62k38dG4
ZjieBr5fknX/HOQjWJ8rySNtgzgGtcxB0RB7E65zE8x9XnLOSpwQozfcR8KJ
MsmzVfKsHWtXvC4XN4VrU/YkzyWrFfKIHpWcY1guMc4xHlUy500zjCVyfid+
J/6bX6c/yjjb3d39E++xxiWfY82zEer7Jdhr2Wk5izFpVAPVAFQD1QBUA9UA
VAPVAFQD1QBUA9UAVAPVAFQD1QBUA9UAVAPVAFQD1QBUA9UAVAPVAFQD1QBU
A9UAVAPVAFQD1QBUA9UAVAPVAFQD1QDYe8veVJKrffeKYvM/ZEvLpQ==
    "], {{0, 159}, {65, 0}}, {0, 255},
    ColorFunction->RGBColor],
   BoxForm`ImageTag["Byte", ColorSpace -> "RGB", Interleaving -> True],
   Selectable->False],
  BaseStyle->"ImageGraphics",
  ImageSize->{52.14285582912117, Automatic},
  ImageSizeRaw->{65, 159},
  PlotRange->{{0, 65}, {0, 159}}]], "Input"],

Cell[BoxData[
 GraphicsBox[
  TagBox[RasterBox[CompressedData["
1:eJztnU9IJEcUh5sYZBcEAyJGL25ANODBHARzGHQ3KAhxs7IRd0Fh3NVED8Ko
EeIexICCRw85ePTo0aNHcwkecvAohMAQcvASMIGEeAjp9Df005q2df443dUz
/T6odWcce6p+VfXqVXX1q4/e5l5+/Z7jON888v55+ebbZ2trb959+b734rN3
61+9bfL+c+ClZ17izTjI5XJPstns04mJz5eGh4e/I/X09Bx3d3efSMpkMru8
PzU19ZrPLi8vfxxT9iJjYWHhU8rV1tZ27r10q0n87dDQ0J53rU9slKEaqL/+
/v7D5ubmS+eesnV0dLgjIyNFiffu+5vHjx9fDA4O7vMdFopWEvJFe3YC+fa0
cCcnJ939/X339PTULYeLiwv35OTEPTg4cF+/elW4RvC6XV1dp0nRgjba29t7
5ATqeGlpyT0+Pi6rzKW4urpyj46O3Lm5Obe1tbVIC77blt3Y2tp6NDAwcGDm
h/zt7u4W8hwVXHtvb++WFvQRz+5+EFf5sfHt7e1njtHePU3cy8vLyMoehO/a
2Ngo6ieeLvk4bOf09PSkae9on/RfW/Dd5EHy09TU9A9ja1TlZ+x2jLrHziWF
w8PDojbBmFzr8tPfHMPmlWvj4+Ts7Mz1xqYie4ndqkX5R0dHN+S6nr9ite2X
AjuBr+EYtvKh5ff7VuF63jgQqc2vJfgkku+xsbGVasuPD4KN4Tq0sSTXfxDq
ijoTHWZnZ8crLT9+h9h/xuLz83PbxaqYfD5/7X9Tlkp9KfH9sLX4rfUKtlvG
C9+nKQu/3RT+Dp+s3mHeIeV58eKLuXI0EB8QG1AvNrAUYhuYe5YaL30bWvg8
85RGgT7hlDFOMOdAJ8f3AxoNGS8Z69bX1z8M08D0hfC5Gg3K5Nz4enthGrAu
we/Hx8dtZzcyZH7FHDOkHzwRjbCjjQo2TsrJemdYP2AsjXMdIG4Y58Rf8OfB
qeoHAmV0/DXrtPUDwfSZ/LI7/vps4b16mhdVC2WU/iB+o/+z8F5akLUW3w5e
r5HxflrABzT9BFknY/0lLYjPyD0xNODep+OvEacF8ZX8e2PX80TW69MC90NM
f7GlpeVXXu/s7Pycz+d/SEPa3Nz8xfcJ/0AD7+fvrJdtb2/brp7Y8MZCmUNe
+W5SavwjQfqC1wd+Uw1UA9VANVANVAPVQDUAWxpwn4N7l5WkqLChgbmeW0mK
6n6nDQ1kzaLSxL3zKLChAfVp1u197d/87MrKSiT5saEB6/qyH4I1nPuQNR7W
PaNa47VlE836vWsfr3lPMKo2ALY0MNsC+wHCiKMNgE3/gL2U8n3B/Q1mG2Df
c5TY9pFkT0iwLUgboK1Evf/FtgamryBtAfsQtU9gYlsDkLYgdR58HTVJ0MBs
C3IfOK42AEnQAMx9pHG2AUiKBviEpgZxfn9SNAAZC+7yF6LiLg2478Dv0pBy
uVyoBmlK2Ww2VIO+vr5bz102alpcXEyMPbBFkmyiLVQD1QBUA9UAVAPVAFQD
1QBUA9UAVAPVAFQD1QBUA9UAVAPVAFQD1QDu0mBtbc121mJjZmamUObm5ua/
TQ3m5+dtZy02VldX5X7Lf6YG3GtLC9IXvPSvqUEmk7GdtdiQ5xuDz3Rxry0t
GLFRiuxBVPtik4jElfNs4l+mBp4mtrMWG/Lcu6fBnwjw/PnErujQyHFABMoo
8VhHx0a/RwMzDgZ7KBsdc5+oGX9V4qEQz7jRoYyUNRgfyIyL0ygx0sKgbNIP
gnGi0tIfzL1wYXG609AfiP/tt/fLrZD4eWZ/qMe4maUw4+H4McJvQSw5iZ9a
6lmTekTaAGWUuEhhmLHzahUzPgmUEzNPoI9IDMW4945GicwPKNtdsRNNiKku
miUpnni1mHvkK4m1LGMEY2k9x5MkvrD4A/hEYWPBXeBDmvGluVa9wbyA9QDH
t4PBeInlYPaJeoozLpjxxjkPqNLyC2ac3XqKrUi8K6fMcaAc/GsUroe2SZ5f
01bFD3Ccm1hgtcA8d4Y+lkQ/MnjuADHQanlGC/bUPIcCW5ukGNRh509EdUYN
tkXGCxJr1LZtJc/CmeeQBGPFRgFjjPiSjr8Wa+M+He3QrPuoz6MJgr8pfpRz
Y39iWXtgDSD4XCB939aZbvgQ5llNju9L0D5raTfx0bhmMJ4Gvl+cdX8f5MNf
nyvKI22DOAbVzEHREHsTrHPHn/s85JyVKCFGb7CPBBNlkmer5Fk71q54XSpu
Ctem7HGeS1Yt5BE9yjnHsFRinGM8KmfOm2QYS+T8TvxO/DevTn+Ucbazs/Mn
3mONSz7Hmmc91PdDMNeyk3IWY9yoBqoBqAaqAagGqgGoBqoBqAaqAagGqgGo
BqoBqAaqAagGqgGoBqoBqAaqAagGqgGoBqoBqAaqAagGqgGoBqoBqAaqAagG
qgGoBqoBqAaqAbD3lr2pJFv77hXF5H+ldNGc
    "], {{0, 159}, {65, 0}}, {0, 255},
    ColorFunction->RGBColor],
   BoxForm`ImageTag[
   "Byte", ColorSpace -> "RGB", ImageSize -> {52.14285582912117, Automatic}, 
    Interleaving -> True],
   Selectable->False],
  BaseStyle->"ImageGraphics",
  ImageSize->{52.14285582912117, Automatic},
  ImageSizeRaw->{65, 159},
  PlotRange->{{0, 65}, {0, 159}}]], "Output",
 CellChangeTimes->{3.619926845995178*^9, 3.6199269941009874`*^9, 
  3.6199270800385804`*^9}]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Variables and parameters", "Subsection"],

Cell[BoxData[
 RowBox[{
  RowBox[{"inputParameters", "  ", "=", " ", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "V0", ",", "0.001", ",", "double", ",", "\"\<m^3\>\"", ",", 
       "\"\<Ackumulator Volume\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"Kca", ",", 
       RowBox[{"1.", " ", 
        SuperscriptBox["10", 
         RowBox[{"-", "8"}]]}], ",", "double", ",", "\"\<m^3/(s Pa)\>\"", 
       ",", "\"\<Ack. inlet coeff.\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "kappa", ",", "1.2", ",", "double", ",", "\"\<\>\"", ",", 
       "\"\<polytropic exp. of gas\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"p0", ",", 
       RowBox[{"1.", "*", 
        SuperscriptBox["10", "7"]}], ",", "double", ",", "\"\<N/m^2\>\"", 
       ",", "\"\<Preload pressure\>\""}], "}"}]}], "\[IndentingNewLine]", 
    "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.524850755625*^9, 3.524850755640625*^9}, {
   3.5494574883125*^9, 3.54945752521875*^9}, {3.549531806859375*^9, 
   3.54953194565625*^9}, {3.54953217975*^9, 3.549532183765625*^9}, {
   3.549544892890625*^9, 3.54954489334375*^9}, {3.549548144921875*^9, 
   3.54954814540625*^9}, 3.5495483063125*^9, {3.549644405828125*^9, 
   3.5496444085*^9}, 3.576214751415736*^9, {3.576216439434739*^9, 
   3.576216449688739*^9}, {3.576216712838739*^9, 3.576216716478739*^9}, {
   3.576216769119055*^9, 3.576216864499592*^9}, 3.605845980530818*^9, {
   3.605846015044269*^9, 3.6058460162973948`*^9}, 3.605847054209175*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"outputVariables", "  ", "=", " ", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"Va", ",", 
       RowBox[{"1.", "*", 
        SuperscriptBox["10", 
         RowBox[{"-", "3"}]]}], ",", "double", ",", "\"\<m^3\>\"", ",", 
       "\"\<Momentary gas volume\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"pa", ",", 
       RowBox[{"1.", "*", 
        SuperscriptBox["10", "7"]}], ",", "double", ",", "\"\<Pa\>\"", ",", 
       "\"\<Ackumulator oil pressure\>\""}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "xmp", ",", "0.", ",", "double", ",", "\"\<m\>\"", ",", 
       "\"\<State of charge\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
      "vmp", ",", "0.", ",", "double", ",", "\"\<m\>\"", ",", 
       "\"\<State of charge speed\>\""}], "}"}]}], "\[IndentingNewLine]", 
    "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.54953165409375*^9, 3.549531724296875*^9}, {
  3.576217056639804*^9, 3.5762170731454544`*^9}, {3.6058460077685413`*^9, 
  3.605846008521617*^9}, {3.605846648737632*^9, 3.605846653236082*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"nodeConnections", "=", 
   RowBox[{"{", "\n", "    \t", 
    RowBox[{"HydraulicQnode", "[", 
     RowBox[{"1", ",", 
      RowBox[{"1.", "*", 
       RowBox[{"10", "^", "5"}]}], ",", "\"\<hydraulic node 1\>\""}], "]"}], 
    "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.524850747078125*^9, 3.524850747078125*^9}, {
  3.54945737746875*^9, 3.54945738609375*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["The system of equations", "Subsection"],

Cell["\<\
Using the equations for piston ackumulator by setting stroke to one.\
\>", "Text",
 CellChangeTimes->{{3.6058460929280567`*^9, 3.605846144053169*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"SL", "=", "1"}], ";"}]], "Input",
 CellChangeTimes->{{3.576216992841425*^9, 3.576216997868928*^9}, 
   3.6199268415197306`*^9, 3.619927056799257*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"Ap", "=", 
   RowBox[{"V0", "/", "SL"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.5762169483479757`*^9, 3.57621695318746*^9}, {
   3.605846046908455*^9, 3.6058460474925137`*^9}, 3.6058460805778217`*^9, {
   3.6058461581285763`*^9, 3.6058461588246455`*^9}}],

Cell["\<\
The restriction in the inlet is recalculated as a viscous friction on the \
\[OpenCurlyDoubleQuote]piston\[CloseCurlyDoubleQuote].\
\>", "Text",
 CellChangeTimes->{{3.605846183592122*^9, 3.605846237888551*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"Bp", "=", 
   FractionBox[
    SuperscriptBox["Ap", "2"], "Kca"]}], ";"}]], "Input",
 CellChangeTimes->{{3.576216660493739*^9, 3.576216693191739*^9}}],

Cell["The generated force on the \"piston\"", "Text",
 CellChangeTimes->{{3.6058465266064205`*^9, 3.6058465431030693`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"fg", " ", "=", " ", 
   RowBox[{
    RowBox[{"Ap", " ", "p1"}], " ", "-", " ", 
    RowBox[{"Ap", " ", "pa"}]}]}], ";"}]], "Input",
 CellChangeTimes->{{3.52178209578125*^9, 3.52178209959375*^9}, {
   3.54945753215625*^9, 3.549457535234375*^9}, 3.549531626078125*^9}],

Cell[BoxData[
 RowBox[{"systemEquationsDA", ":=", " ", 
  RowBox[{"{", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"Bp", " ", 
      RowBox[{"der", "[", "xmp", "]"}]}], " ", "==", " ", "fg"}], " ", ",", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Bp", " ", "vmp"}], "  ", "==", " ", "fg"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"q1", " ", "\[Equal]", 
     RowBox[{
      RowBox[{"-", " ", "Ap"}], " ", "vmp"}]}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"pa", "  ", 
      SuperscriptBox[
       RowBox[{"(", 
        RowBox[{
         RowBox[{"limit", "[", 
          RowBox[{
           RowBox[{"SL", "-", "xmp"}], ",", 
           RowBox[{"0.001", " ", "SL"}], ",", "SL"}], "]"}], "Ap"}], ")"}], 
       "kappa"]}], " ", "==", 
     RowBox[{"p0", " ", 
      SuperscriptBox[
       RowBox[{
        RowBox[{"(", 
         RowBox[{"SL", " ", "Ap"}], ")"}], " "}], "kappa"]}]}]}], "\n", "\t", 
   "}"}]}]], "Input",
 CellChangeTimes->{{3.524850724265625*^9, 3.524850724265625*^9}, 
   3.549457307015625*^9, {3.549457351265625*^9, 3.54945736171875*^9}, {
   3.549457392*^9, 3.549457398203125*^9}, {3.54945742834375*^9, 
   3.549457482296875*^9}, {3.5494575509375*^9, 3.549457556703125*^9}, 
   3.549526952765625*^9, {3.549532039546875*^9, 3.549532058125*^9}, {
   3.54953211190625*^9, 3.5495321299375*^9}, {3.549532235765625*^9, 
   3.549532235828125*^9}, {3.549544864359375*^9, 3.549544883234375*^9}, {
   3.549548317125*^9, 3.549548322796875*^9}, {3.549548688859375*^9, 
   3.549548692421875*^9}, {3.5719033502092543`*^9, 3.571903383796113*^9}, {
   3.5762147596047363`*^9, 3.576214789346736*^9}, 3.576214838815736*^9, 
   3.5762149233297358`*^9, {3.619926327818366*^9, 3.6199263453261166`*^9}, {
   3.6199264105686398`*^9, 3.619926433744958*^9}, 3.61992699032561*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"expressions", " ", "=", " ", "\[IndentingNewLine]", 
   RowBox[{"{", 
    RowBox[{"Va", "==", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{"SL", "-", "xmp"}], ")"}], "Ap"}]}], "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.54952682025*^9, 3.54952686515625*^9}, {
   3.5719034223281803`*^9, 3.571903426477788*^9}, 3.6058465630910683`*^9}],

Cell["Limitatons", "Text",
 CellChangeTimes->{{3.524850848515625*^9, 3.524850857984375*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"variable2Limits", "=", 
   RowBox[{"{", 
    RowBox[{"{", 
     RowBox[{"xmp", ",", "vmp", ",", "0.", ",", "SL"}], "}"}], "}"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.521781710359375*^9, 3.521781715921875*^9}, 
   3.521781911703125*^9, {3.521782089203125*^9, 3.521782090109375*^9}, {
   3.549457539921875*^9, 3.54945754465625*^9}}],

Cell["The boundarys", "Text"],

Cell[BoxData[
 RowBox[{
  RowBox[{"systemBoundaryEquations", " ", "=", " ", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{"p1", "==", 
     RowBox[{"c1e", "+", 
      RowBox[{"Zc1e", " ", "q1"}]}]}], "\[IndentingNewLine]", "}"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.52485078196875*^9, 3.52485078196875*^9}, {
  3.549457268203125*^9, 3.549457269234375*^9}, {3.5494574144375*^9, 
  3.549457415609375*^9}, {3.5719034112833614`*^9, 3.5719034182409735`*^9}, {
  3.594115692243491*^9, 3.5941157083961067`*^9}}],

Cell["The  vector of independent variables of the system are", "Text",
 CellChangeTimes->{{3.524850810625*^9, 3.52485083609375*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"systemVariables", "=", " ", 
   RowBox[{"{", 
    RowBox[{"xmp", ",", "vmp", ",", "q1", ",", "pa", ",", "p1"}], "}"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.524850716875*^9, 3.524850716875*^9}, {
  3.54952696459375*^9, 3.54952699509375*^9}}],

Cell[BoxData[
 RowBox[{"Compgen", "[", "file", "]"}]], "Input",
 CellGroupingRules->{GroupTogetherGrouping, 10000.},
 CellChangeTimes->{3.6058500608243685`*^9}],

Cell[BoxData[
 RowBox[{
  StyleBox[
   RowBox[{"Part", "::", "partd"}], "MessageName"], 
  RowBox[{
  ":", " "}], "\<\"Part specification \[NoBreak]\\!\\(delayedPart \
\[LeftDoubleBracket] \\(\\(1, 1\\)\\) \[RightDoubleBracket]\\)\[NoBreak] is \
longer than depth of object. \\!\\(\\*ButtonBox[\\\"\[RightSkeleton]\\\", \
ButtonStyle->\\\"Link\\\", ButtonFrame->None, \
ButtonData:>\\\"paclet:ref/message/General/partd\\\", ButtonNote -> \
\\\"Part::partd\\\"]\\)\"\>"}]], "Message", "MSG",
 CellChangeTimes->{3.6199268463542147`*^9, 3.619926994367014*^9, 
  3.6199270803986163`*^9}],

Cell[BoxData[
 RowBox[{
  StyleBox[
   RowBox[{"XMLElement", "::", "cntsList"}], "MessageName"], 
  RowBox[{
  ":", " "}], "\<\"\[NoBreak]\\!\\(XMLElement[\\(\\(\\\"modelobject\\\", \
\\(\\({\\(\\(\\\"typename\\\" \[Rule] \\\"HydraulicAckumulator\\\"\\)\\), \\(\
\\(\[LeftSkeleton] 1 \[RightSkeleton]\\)\\)}\\)\\), \
\\(\\({\\(\\(XMLElement[\\(\\(\\\"icon\\\", \\(\\({\\(\\(\\\"isopath\\\" \
\[Rule] \\\"HydraulicAckumulator.svg\\\"\\)\\), \\(\\(\\\"iconrotation\\\" \
\[Rule] \\\"ON\\\"\\)\\), \\(\\(\\\"userpath\\\" \[Rule] \
\\\"HydraulicAckumulator.svg\\\"\\)\\)}\\)\\), \\(\\({}\\)\\)\\)\\)]\\)\\), \
\\(\\(XMLElement[\\(\\(\\\"portpositions\\\", \\(\\({}\\)\\), \
\\(\\({\\(\\(XMLElement[\\(\\(\\\"portpose\\\", \\(\\({\\(\\(\\\"x\\\" \
\[Rule] \\\"0\\\"\\)\\), \\(\\(\\\"y\\\" \[Rule] 0.5`\\)\\), \\(\\(\\\"a\\\" \
\[Rule] \\\"0\\\"\\)\\), \\(\\(\\\"name\\\" \[Rule] \\\"P1\\\"\\)\\)}\\)\\), \
\\(\\({}\\)\\)\\)\\)]\\)\\), \\(\\(\[LeftSkeleton] 3 \[RightSkeleton]\\)\\), \
\\(\\(XMLElement[\\(\\(\\\"portpose\\\", \\(\\({\\(\\(\\\"x\\\" \[Rule] \
\\\"0.8\\\"\\)\\), \\(\\(\\\"y\\\" \[Rule] \\\"1\\\"\\)\\), \\(\\(\\\"a\\\" \
\[Rule] \\\"90\\\"\\)\\), \\(\\(\\\"name\\\" \[Rule] \
\\\"vmp\\\"\\)\\)}\\)\\), \\(\\({}\\)\\)\\)\\)]\\)\\)}\\)\\)\\)\\)]\\)\\)}\\)\
\\)\\)\\)]\\)\[NoBreak] in \
\[NoBreak]\\!\\(XMLElement[\\(\\(\\\"hopsanobjectappearance\\\", \
\\(\\({\\\"version\\\" \[Rule] \\\"0.1\\\"}\\)\\), \
\\(\\(XMLElement[\\(\\(\\\"modelobject\\\", \\(\\({\\(\\(\\\"typename\\\" \
\[Rule] \\\"HydraulicAckumulator\\\"\\)\\), \\(\\(\\\"displayname\\\" \[Rule] \
\\\"HydraulicAckumulator\\\"\\)\\)}\\)\\), \
\\(\\({\\(\\(XMLElement[\\(\\(\\\"icon\\\", \\(\\({\\(\\(\\\"isopath\\\" \
\[Rule] \\\"HydraulicAckumulator.svg\\\"\\)\\), \\(\\(\\\"iconrotation\\\" \
\[Rule] \\\"ON\\\"\\)\\), \\(\\(\\\"userpath\\\" \[Rule] \
\\\"HydraulicAckumulator.svg\\\"\\)\\)}\\)\\), \\(\\({}\\)\\)\\)\\)]\\)\\), \
\\(\\(XMLElement[\\(\\(\\\"portpositions\\\", \\(\\({}\\)\\), \\(\\(\
\[LeftSkeleton] 1 \
\[RightSkeleton]\\)\\)\\)\\)]\\)\\)}\\)\\)\\)\\)]\\)\\)\\)\\)]\\)\[NoBreak] \
is not a list of contents. The third item in an XMLElement must be a list of \
contents, even if it is an empty list. \
\\!\\(\\*ButtonBox[\\\"\[RightSkeleton]\\\", ButtonStyle->\\\"Link\\\", \
ButtonFrame->None, ButtonData:>\\\"paclet:ref/XMLElement\\\", ButtonNote -> \
\\\"XMLElement::cntsList\\\"]\\)\"\>"}]], "Message", "MSG",
 CellChangeTimes->{3.6199268463542147`*^9, 3.619926994367014*^9, 
  3.6199270804586225`*^9}],

Cell[BoxData[
 RowBox[{
  StyleBox[
   RowBox[{"Export", "::", "autofix"}], "MessageName"], 
  RowBox[{
  ":", " "}], "\<\"Malformed symbolic XML expression encountered. This may \
result in unexpected XML data. \\!\\(\\*ButtonBox[\\\"\[RightSkeleton]\\\", \
ButtonStyle->\\\"Link\\\", ButtonFrame->None, \
ButtonData:>\\\"paclet:ref/Export\\\", ButtonNote -> \\\"Export::autofix\\\"]\
\\)\"\>"}]], "Message", "MSG",
 CellChangeTimes->{3.6199268463542147`*^9, 3.619926994367014*^9, 
  3.619927080465623*^9}],

Cell[BoxData[
 RowBox[{
  StyleBox[
   RowBox[{"XMLElement", "::", "attrhs"}], "MessageName"], 
  RowBox[{
  ":", " "}], "\<\"\[NoBreak]\\!\\(0.5`\\)\[NoBreak] in \[NoBreak]\\!\\(\\\"y\
\\\" \[Rule] 0.5`\\)\[NoBreak] is not a valid value for an attribute in an \
XMLElement. The value of the attribute must be a string. \
\\!\\(\\*ButtonBox[\\\"\[RightSkeleton]\\\", ButtonStyle->\\\"Link\\\", \
ButtonFrame->None, ButtonData:>\\\"paclet:ref/XMLElement\\\", ButtonNote -> \
\\\"XMLElement::attrhs\\\"]\\)\"\>"}]], "Message", "MSG",
 CellChangeTimes->{3.6199268463542147`*^9, 3.619926994367014*^9, 
  3.6199270804716234`*^9}],

Cell[BoxData[
 RowBox[{
  StyleBox[
   RowBox[{"Export", "::", "autofix"}], "MessageName"], 
  RowBox[{
  ":", " "}], "\<\"Malformed symbolic XML expression encountered. This may \
result in unexpected XML data. \\!\\(\\*ButtonBox[\\\"\[RightSkeleton]\\\", \
ButtonStyle->\\\"Link\\\", ButtonFrame->None, \
ButtonData:>\\\"paclet:ref/Export\\\", ButtonNote -> \\\"Export::autofix\\\"]\
\\)\"\>"}]], "Message", "MSG",
 CellChangeTimes->{3.6199268463542147`*^9, 3.619926994367014*^9, 
  3.619927080475624*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"Bp", "=."}], ";", 
  RowBox[{"Ap", "=."}], ";", 
  RowBox[{"SL", "=."}], ";"}]], "Input",
 CellGroupingRules->{GroupTogetherGrouping, 10000.},
 CellChangeTimes->{{3.5762171779989386`*^9, 3.5762171919883375`*^9}, 
   3.605775706999442*^9, 3.6058500608243685`*^9}]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1004, 770},
WindowMargins->{{385, Automatic}, {7, Automatic}},
PrintingCopies->1,
PrintingPageRange->{32000, 32000},
PrintingOptions->{"Magnification"->1.,
"PaperOrientation"->"Portrait",
"PaperSize"->{582.9599999999999, 829.0799999999999}},
Magnification->1.100000023841858,
FrontEndVersion->"8.0 for Microsoft Windows (64-bit) (October 6, 2011)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[579, 22, 277, 5, 77, "Section",
 Evaluatable->False],
Cell[CellGroupData[{
Cell[881, 31, 1760, 36, 193, "Input"],
Cell[2644, 69, 267, 6, 32, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[2948, 80, 43, 0, 40, "Subsection"],
Cell[CellGroupData[{
Cell[3016, 84, 293, 6, 30, "Text",
 CellGroupingRules->{GroupTogetherGrouping, 10000.}],
Cell[3312, 92, 315, 7, 35, "Input",
 CellGroupingRules->{GroupTogetherGrouping, 10000.}]
}, Closed]],
Cell[CellGroupData[{
Cell[3664, 104, 2812, 50, 149, "Input"],
Cell[6479, 156, 3001, 55, 156, "Output"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[9529, 217, 46, 0, 40, "Subsection"],
Cell[9578, 219, 1613, 33, 142, "Input"],
Cell[11194, 254, 1194, 28, 141, "Input"],
Cell[12391, 284, 398, 10, 53, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[12826, 299, 45, 0, 40, "Subsection"],
Cell[12874, 301, 160, 3, 30, "Text"],
Cell[13037, 306, 184, 4, 32, "Input"],
Cell[13224, 312, 291, 6, 32, "Input"],
Cell[13518, 320, 220, 4, 30, "Text"],
Cell[13741, 326, 185, 5, 50, "Input"],
Cell[13929, 333, 123, 1, 30, "Text"],
Cell[14055, 336, 301, 7, 32, "Input"],
Cell[14359, 345, 1824, 41, 137, "Input"],
Cell[16186, 388, 378, 9, 53, "Input"],
Cell[16567, 399, 92, 1, 30, "Text"],
Cell[16662, 402, 372, 9, 32, "Input"],
Cell[17037, 413, 29, 0, 30, "Text"],
Cell[17069, 415, 519, 11, 73, "Input"],
Cell[17591, 428, 132, 1, 30, "Text"],
Cell[17726, 431, 282, 7, 32, "Input"],
Cell[18011, 440, 160, 3, 32, "Input",
 CellGroupingRules->{GroupTogetherGrouping, 10000.}],
Cell[18174, 445, 583, 12, 23, "Message"],
Cell[18760, 459, 2497, 40, 157, "Message"],
Cell[21260, 501, 507, 11, 23, "Message"],
Cell[21770, 514, 624, 12, 23, "Message"],
Cell[22397, 528, 507, 11, 23, "Message"],
Cell[22907, 541, 297, 7, 32, "Input",
 CellGroupingRules->{GroupTogetherGrouping, 10000.}]
}, Open  ]]
}, Open  ]]
}
]
*)

(* End of internal cache information *)
